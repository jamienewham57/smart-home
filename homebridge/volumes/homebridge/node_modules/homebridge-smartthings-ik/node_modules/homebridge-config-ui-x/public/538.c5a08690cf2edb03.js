"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[538],{66538:(q,u,r)=>{r.r(u),r.d(u,{AccessoriesModule:()=>I});var d=r(36895),c=r(24006),l=r(54463),m=r(8304),g=r(38333),h=r(40294),f=r(63770),p=r(57750),e=r(94650);const x=function(){return{standalone:!0}};let M=(()=>{class o{constructor(s){this.activeModal=s}ngOnInit(){}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(m.Kz))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-add-room-modal"]],inputs:{roomName:"roomName"},decls:18,vars:7,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"translate"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["role","alert",1,"alert","alert-info",3,"translate"],[1,"md-form"],[1,"fas","fa-home","prefix","grey-text"],["type","text","id","form-name","autofocus","",1,"form-control","pl-0","pr-0",3,"ngModel","ngModelOptions","ngModelChange","keyup.enter"],["for","form-name",3,"translate"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"translate","click"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3,"Create New Room"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return t.activeModal.dismiss("Cross click")}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"form")(8,"div",5),e._UZ(9,"div",6),e.TgZ(10,"div",7),e._UZ(11,"i",8),e.TgZ(12,"input",9),e.NdJ("ngModelChange",function(a){return t.roomName=a})("keyup.enter",function(){return t.activeModal.close(t.roomName)}),e.qZA(),e.TgZ(13,"label",10),e._uU(14,"Room Name"),e.qZA()()(),e.TgZ(15,"div",11)(16,"button",12),e.NdJ("click",function(){return t.activeModal.close(t.roomName)}),e._uU(17,"Create Room"),e.qZA()()()()),2&s&&(e.xp6(2),e.Q6J("translate","accessories.title_create_new_room"),e.xp6(7),e.Q6J("translate","accessories.message_rooms_not_appear_in_homekit"),e.xp6(3),e.Q6J("ngModel",t.roomName)("ngModelOptions",e.DdM(6,x)),e.xp6(1),e.Q6J("translate","accessories.label_room_name"),e.xp6(3),e.Q6J("translate","accessories.button_create_room"))},dependencies:[c._Y,c.Fj,c.JJ,c.JL,c.On,c.F,l.Pi],encapsulation:2}),o})();var C=r(97185),b=r(92503),A=r(58605),y=r(67197),Z=r(57076);let T=(()=>{class o{constructor(){}ngOnInit(){}}return o.\u0275fac=function(s){return new(s||o)},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-drag-here-placeholder"]],decls:3,vars:0,consts:[[1,"accessory-box"],[1,"fas","fa-arrow-alt-circle-down","accessory-icon"],["translate","accessories.control.drag_here",1,"accessory-label"]],template:function(s,t){1&s&&(e.TgZ(0,"div",0),e._UZ(1,"i",1)(2,"div",2),e.qZA())},dependencies:[l.Pi],styles:[".accessory-box[_ngcontent-%COMP%]{opacity:.2}"]}),o})();const J=function(o){return{"cursor-move":o}};function w(o,n){if(1&o&&(e.TgZ(0,"div",18)(1,"div",19)(2,"h5",20),e._uU(3),e.ALo(4,"translate"),e.qZA()()()),2&o){const s=e.oxw().$implicit,t=e.oxw(2);e.xp6(2),e.Q6J("ngClass",e.VKq(4,J,!t.isMobile)),e.xp6(1),e.hij(" ","Default Room"===s.name?e.lcZ(4,2,"accessories.control.default_room"):s.name," ")}}function Q(o,n){if(1&o&&(e.ynx(0),e._UZ(1,"app-accessory-tile",24),e.BQk()),2&o){const s=e.oxw().$implicit;e.xp6(1),e.Q6J("service",s)}}function $(o,n){if(1&o&&(e.TgZ(0,"div",23),e.YNc(1,Q,2,1,"ng-container",0),e.qZA()),2&o){const s=n.$implicit,t=e.oxw(4);e.Q6J("ngSwitch",s.type),e.xp6(1),e.Q6J("ngIf",!t.hideHidden||!s.hidden)}}function k(o,n){if(1&o){const s=e.EpF();e.TgZ(0,"div",21),e.NdJ("dragulaModelChange",function(i){e.CHM(s);const a=e.oxw().$implicit;return e.KtG(a.services=i)}),e.YNc(1,$,2,2,"div",22),e.qZA()}if(2&o){const s=e.oxw().$implicit;e.Q6J("dragula","services-bag")("dragulaModel",s.services),e.xp6(1),e.Q6J("ngForOf",s.services)}}function N(o,n){if(1&o){const s=e.EpF();e.TgZ(0,"div",25),e.NdJ("dragulaModelChange",function(i){e.CHM(s);const a=e.oxw().$implicit;return e.KtG(a.services=i)}),e._UZ(1,"app-drag-here-placeholder",26),e.qZA()}if(2&o){const s=e.oxw().$implicit;e.Q6J("dragula","services-bag")("dragulaModel",s.services)}}function U(o,n){if(1&o&&(e.TgZ(0,"div"),e.YNc(1,w,5,6,"div",14),e.TgZ(2,"div",15),e.YNc(3,k,2,3,"div",16),e.YNc(4,N,2,2,"div",17),e.qZA()()),2&o){const s=n.$implicit,t=e.oxw(2);e.xp6(1),e.Q6J("ngIf",!t.isMobile||s.services.length),e.xp6(2),e.Q6J("ngIf",s.services.length),e.xp6(1),e.Q6J("ngIf",!s.services.length&&!t.isMobile)}}function H(o,n){if(1&o){const s=e.EpF();e.TgZ(0,"div")(1,"div",1)(2,"div",2)(3,"h3",3)(4,"span",4),e._uU(5),e.ALo(6,"translate"),e.qZA()()(),e.TgZ(7,"div",5)(8,"div",6)(9,"div",7)(10,"button",8),e._UZ(11,"i",9),e.qZA(),e.TgZ(12,"div",10)(13,"a",11),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.addRoom())}),e._uU(14,"Add Room"),e.qZA(),e.TgZ(15,"a",11),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.hideHidden=!i.hideHidden)}),e._uU(16,"Toggle Hidden"),e.qZA(),e.TgZ(17,"a",11),e.NdJ("click",function(){e.CHM(s);const i=e.oxw();return e.KtG(i.toggleLayoutLock())}),e._uU(18,"Toggle Layout Lock"),e.qZA()()()()()(),e.TgZ(19,"div",12),e.NdJ("dragulaModelChange",function(i){e.CHM(s);const a=e.oxw();return e.KtG(a.$accessories.rooms=i)}),e.YNc(20,U,5,3,"div",13),e.qZA()()}if(2&o){const s=e.oxw();e.xp6(5),e.hij("Homebridge ",e.lcZ(6,7,"accessories.title_accessories"),""),e.xp6(8),e.Q6J("translate","accessories.button_add_room"),e.xp6(2),e.Q6J("translate","accessories.button_toggle_hidden"),e.xp6(2),e.Q6J("translate","accessories.button_toggle_layout_lock"),e.xp6(2),e.Q6J("dragula","rooms-bag")("dragulaModel",s.$accessories.rooms),e.xp6(1),e.Q6J("ngForOf",s.$accessories.rooms)}}function O(o,n){1&o&&(e.TgZ(0,"div")(1,"div",18)(2,"div",27)(3,"h3",28),e._uU(4,"Homebridge Accessory Control Disabled"),e.qZA(),e.TgZ(5,"div")(6,"p",29),e.ALo(7,"translate"),e._uU(8,"To control your accessories you must be running Homebridge in "),e.TgZ(9,"strong"),e._uU(10,"insecure"),e.qZA(),e._uU(11," mode."),e.qZA(),e.TgZ(12,"p")(13,"span",30),e._uU(14,"Please see"),e.qZA(),e.TgZ(15,"a",31),e._uU(16," https://github.com/homebridge/homebridge-config-ui-x/wiki/Enabling-Accessory-Control "),e.qZA(),e.TgZ(17,"span",30),e._uU(18,"for more information."),e.qZA()()()()()()),2&o&&(e.xp6(3),e.Q6J("translate","accessories.title_accessory_control_disabled"),e.xp6(3),e.Q6J("innerHTML",e.lcZ(7,4,"accessories.message_must_use_insecure_mode"),e.oJD),e.xp6(7),e.Q6J("translate","accessories.message_please_see"),e.xp6(4),e.Q6J("translate","accessories.message_for_more_information"))}const F=[{path:"",component:(()=>{class o{constructor(s,t,i,a,L,P,Y){this.dragulaService=s,this.$toastr=t,this.modalService=i,this.$settings=a,this.$md=L,this.translate=P,this.$accessories=Y,this.isMobile=!1,this.hideHidden=!0,this.isMobile=this.$md.detect.mobile(),s.createGroup("rooms-bag",{moves:(_,S,v)=>!this.isMobile&&v.classList.contains("drag-handle")}),s.createGroup("services-bag",{moves:(_,S,v,K)=>!this.isMobile&&!_.classList.contains("no-drag")}),this.orderSubscription=s.drop().subscribe(()=>{setTimeout(()=>{this.$accessories.saveLayout()})}),window.localStorage.getItem("accessories-layout-locked")&&(this.isMobile=!0)}ngOnInit(){this.$accessories.start()}addRoom(){this.modalService.open(M,{size:"lg"}).result.then(t=>{!t||!t.length||this.$accessories.rooms.find(i=>i.name===t)||(this.$accessories.rooms.push({name:t,services:[]}),this.isMobile&&this.toggleLayoutLock())}).catch(()=>{})}toggleLayoutLock(){this.isMobile=!this.isMobile,this.isMobile?(window.localStorage.setItem("accessories-layout-locked","yes"),this.$toastr.success(this.translate.instant("accessories.layout_locked"),this.translate.instant("accessories.title_accessories"))):(window.localStorage.removeItem("accessories-layout-locked"),this.$toastr.success(this.translate.instant("accessories.layout_unlocked"),this.translate.instant("accessories.title_accessories")))}ngOnDestroy(){this.$accessories.stop(),this.orderSubscription.unsubscribe(),this.dragulaService.destroy("rooms-bag"),this.dragulaService.destroy("services-bag")}}return o.\u0275fac=function(s){return new(s||o)(e.Y36(g.pQ),e.Y36(C._W),e.Y36(m.FF),e.Y36(b.g),e.Y36(A.L),e.Y36(l.sK),e.Y36(y.N))},o.\u0275cmp=e.Xpm({type:o,selectors:[["app-accessories"]],decls:2,vars:2,consts:[[4,"ngIf"],[1,"row","mb-3"],[1,"col-sm-6"],[1,"primary-text","m-0"],[1,"d-none","d-md-inline"],[1,"col-sm-6","text-right","d-none","d-sm-block"],["role","group","aria-label","Button group with nested dropdown",1,"btn-group"],["role","group",1,"btn-group"],["id","accessory-dropdown-menu","type","button","data-toggle","dropdown",1,"btn","btn-primary","dropdown-toggle"],[1,"fas","fa-cog"],["aria-labelledby","accessory-dropdown-menu",1,"dropdown-menu","dropdown-menu-right"],["href","javascript:void(0)",1,"dropdown-item",3,"translate","click"],[3,"dragula","dragulaModel","dragulaModelChange"],[4,"ngFor","ngForOf"],["class","row",4,"ngIf"],[1,"row","mb-4"],["class","col-md-12 d-flex flex-wrap noselect services-bag",3,"dragula","dragulaModel","dragulaModelChange",4,"ngIf"],["class","col-md-12 d-flex flex-wrap noselect",3,"dragula","dragulaModel","dragulaModelChange",4,"ngIf"],[1,"row"],[1,"col-md-12"],[1,"primary-text","drag-handle","room-title",3,"ngClass"],[1,"col-md-12","d-flex","flex-wrap","noselect","services-bag",3,"dragula","dragulaModel","dragulaModelChange"],["class","accessory-item accessory-tab",3,"ngSwitch",4,"ngFor","ngForOf"],[1,"accessory-item","accessory-tab",3,"ngSwitch"],[3,"service"],[1,"col-md-12","d-flex","flex-wrap","noselect",3,"dragula","dragulaModel","dragulaModelChange"],[1,"no-drag"],[1,"col-md-12","text-center"],[1,"primary-text",3,"translate"],[3,"innerHTML"],[3,"translate"],["target","_blank","rel","noopener noreferrer","href","https://github.com/homebridge/homebridge-config-ui-x/wiki/Enabling-Accessory-Control"]],template:function(s,t){1&s&&(e.YNc(0,H,21,9,"div",0),e.YNc(1,O,19,6,"div",0)),2&s&&(e.Q6J("ngIf",t.$settings.env.enableAccessories),e.xp6(1),e.Q6J("ngIf",!t.$settings.env.enableAccessories))},dependencies:[d.mk,d.sg,d.O5,d.RF,g.sW,l.Pi,Z.Z,T,l.X$],styles:[".room-title[_ngcontent-%COMP%]{margin-left:10px}@media (max-width: 575px){.room-title[_ngcontent-%COMP%]{margin-left:7px}}.services-bag[_ngcontent-%COMP%]{min-height:170px}@media (max-width: 575px){.services-bag[_ngcontent-%COMP%]{min-height:0;min-height:initial}}.cursor-move[_ngcontent-%COMP%]{cursor:move}.gu-transit[_ngcontent-%COMP%]   .manage-accessory-button[_ngcontent-%COMP%]{display:none}"]}),o})()}];let R=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[p.Bz.forChild(F),p.Bz]}),o})(),I=(()=>{class o{}return o.\u0275fac=function(s){return new(s||o)},o.\u0275mod=e.oAB({type:o}),o.\u0275inj=e.cJS({imports:[d.ez,c.u5,m.IJ,g.qE,l.aw.forChild(),h.I,f.P,R]}),o})()}}]);