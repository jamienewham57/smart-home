"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[470],{57470:(P,b,u)=>{u.r(b),u.d(b,{UsersModule:()=>z});var d=u(36895),l=u(54463),n=u(24006),m=u(8304),C=u(40294),_=u(57750),t=u(94650),p=u(97185),c=u(79274);const h=function(r){return{active:r}},g=function(r){return{"is-invalid":r}};let x=(()=>{class r{constructor(e,s,o,i){this.activeModal=e,this.toastr=s,this.translate=o,this.$api=i,this.form=new n.cw({username:new n.NI("",[n.kI.required]),name:new n.NI("",[n.kI.required]),password:new n.NI("",[n.kI.compose([n.kI.required,n.kI.minLength(4)])]),passwordConfirm:new n.NI("",[n.kI.required]),admin:new n.NI(!0)},this.matchPassword),this.page={title:"users.title_add_user",save:"users.button_add_new_user",password:"users.label_password"}}ngOnInit(){}matchPassword(e){if(e.get("password").value===e.get("passwordConfirm").value)return null;e.get("passwordConfirm").setErrors({matchPassword:!0})}onSubmit({value:e}){this.$api.post("/users",e).subscribe(o=>{this.activeModal.close(),this.toastr.success(this.translate.instant("users.toast_added_new_user"),this.translate.instant("toast.title_success"))},o=>{this.toastr.error(o.error.message||this.translate.instant("users.toast_failed_to_add_user"),this.translate.instant("toast.title_error"))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.Kz),t.Y36(p._W),t.Y36(l.sK),t.Y36(c.s))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-users-add"]],decls:33,vars:28,consts:[[1,"modal-content"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"h4","text-center","mb-4",3,"innerText"],[1,"md-form"],[1,"fas","fa-user-shield","prefix","grey-text"],["formControlName","username","type","text","id","form-username","autocomplete","username","autocapitalize","none",1,"form-control","pl-0","pr-0"],["for","form-username",3,"ngClass","translate"],[1,"fas","fa-user","prefix","grey-text"],["formControlName","name","type","text","id","form-name","autocomplete","name",1,"form-control","pl-0","pr-0"],["for","form-name",3,"ngClass","translate"],[1,"row","pb-3"],[1,"col-md-6"],[1,"fas","fa-lock","prefix","grey-text"],["formControlName","password","type","password","autocomplete","new-password","id","form-pass",1,"form-control","pl-0","pr-0",3,"ngClass"],["for","form-pass",3,"innerText"],["formControlName","passwordConfirm","type","password","autocomplete","new-password","id","form-pass-confirm",1,"form-control","pl-0","pr-0",3,"ngClass"],["for","form-pass-confirm",3,"translate"],[1,"form-check","text-center","mb-4"],["formControlName","admin","type","checkbox","id","isAdmin",1,"form-check-input"],["for","isAdmin",1,"form-check-label",3,"translate"],[1,"text-center"],["type","submit",1,"btn","btn-primary",3,"disabled","innerText"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return s.onSubmit(s.form)}),t._UZ(3,"p",3),t.ALo(4,"translate"),t.TgZ(5,"div",4),t._UZ(6,"i",5)(7,"input",6),t.TgZ(8,"label",7),t._uU(9,"Username"),t.qZA()(),t.TgZ(10,"div",4),t._UZ(11,"i",8)(12,"input",9),t.TgZ(13,"label",10),t._uU(14,"Full Name"),t.qZA()(),t.TgZ(15,"div",11)(16,"div",12)(17,"div",4),t._UZ(18,"i",13)(19,"input",14)(20,"label",15),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",12)(23,"div",4),t._UZ(24,"input",16)(25,"label",17),t.qZA()()(),t.TgZ(26,"div",18),t._UZ(27,"input",19),t.TgZ(28,"label",20),t._uU(29,"Admin User?"),t.qZA()(),t.TgZ(30,"div",21),t._UZ(31,"button",22),t.ALo(32,"translate"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",s.form),t.xp6(1),t.Q6J("innerText",t.lcZ(4,14,s.page.title)),t.xp6(4),t.uIk("disabled","users.title_edit_user"===s.page.title||null),t.xp6(1),t.Q6J("ngClass",t.VKq(20,h,"users.title_edit_user"===s.page.title))("translate","users.label_username"),t.xp6(5),t.Q6J("ngClass",t.VKq(22,h,"users.title_edit_user"===s.page.title))("translate","users.label_full_name"),t.xp6(6),t.Q6J("ngClass",t.VKq(24,g,s.form.controls.password.dirty&&s.form.controls.password.errors)),t.xp6(1),t.Q6J("innerText",t.lcZ(21,16,s.page.password)),t.xp6(4),t.Q6J("ngClass",t.VKq(26,g,s.form.controls.passwordConfirm.dirty&&s.form.controls.passwordConfirm.errors)),t.xp6(1),t.Q6J("translate","users.label_confirm_password"),t.xp6(3),t.Q6J("translate","users.label_admin_user"),t.xp6(3),t.Q6J("disabled",!s.form.valid)("innerText",t.lcZ(32,18,s.page.save)))},dependencies:[d.mk,n._Y,n.Fj,n.Wl,n.JJ,n.JL,n.sg,n.u,l.Pi,l.X$],encapsulation:2}),r})();var v=u(88951);const U=function(r){return{active:r}},Z=function(r){return{"is-invalid":r}};let T=(()=>{class r{constructor(e,s,o,i,f){this.activeModal=e,this.toastr=s,this.translate=o,this.$api=i,this.$auth=f,this.form=new n.cw({username:new n.NI("",[n.kI.required]),name:new n.NI("",[n.kI.required]),password:new n.NI(""),passwordConfirm:new n.NI(""),admin:new n.NI(!0)},this.matchPassword),this.page={title:"users.title_edit_user",save:"form.button_save",password:"users.label_new_password"},this.isCurrentUser=!1}ngOnInit(){this.isCurrentUser=this.$auth.user.username===this.user.username,this.form.patchValue(this.user)}matchPassword(e){if(e.get("password").value===e.get("passwordConfirm").value)return null;e.get("passwordConfirm").setErrors({matchPassword:!0})}onSubmit({value:e}){this.$api.patch(`/users/${this.user.id}`,e).subscribe(o=>{this.activeModal.close(),this.toastr.success(this.translate.instant("users.toast_updated_user"),this.translate.instant("toast.title_success")),this.isCurrentUser&&e.username!==this.$auth.user.username&&this.$auth.logout()},o=>{this.toastr.error(o.error.message||this.translate.instant("users.toast_failed_to_add_user"),this.translate.instant("toast.title_error"))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.Kz),t.Y36(p._W),t.Y36(l.sK),t.Y36(c.s),t.Y36(v.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-users-edit"]],inputs:{user:"user"},decls:33,vars:27,consts:[[1,"modal-content"],[1,"modal-body"],["novalidate","",3,"formGroup","ngSubmit"],[1,"h4","text-center","mb-4",3,"innerText"],[1,"md-form"],[1,"fas","fa-user-shield","prefix","grey-text"],["formControlName","username","type","text","id","form-username","autocomplete","off","autocapitalize","none",1,"form-control","pl-0","pr-0"],["for","form-username",3,"ngClass","translate"],[1,"fas","fa-user","prefix","grey-text"],["formControlName","name","type","text","id","form-name","autocomplete","name",1,"form-control","pl-0","pr-0"],["for","form-name",3,"ngClass","translate"],[1,"row","pb-3"],[1,"col-md-6"],[1,"fas","fa-lock","prefix","grey-text"],["formControlName","password","type","password","autocomplete","new-password","id","form-pass",1,"form-control","pl-0","pr-0",3,"ngClass"],["for","form-pass",3,"innerText"],["formControlName","passwordConfirm","type","password","autocomplete","new-password","id","form-pass-confirm",1,"form-control","pl-0","pr-0",3,"ngClass"],["for","form-pass-confirm",3,"translate"],[1,"form-check","text-center","mb-4"],["formControlName","admin","type","checkbox","id","isAdmin",1,"form-check-input"],["for","isAdmin",1,"form-check-label",3,"translate"],[1,"text-center"],["type","submit",1,"btn","btn-primary",3,"disabled","innerText"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"form",2),t.NdJ("ngSubmit",function(){return s.onSubmit(s.form)}),t._UZ(3,"p",3),t.ALo(4,"translate"),t.TgZ(5,"div",4),t._UZ(6,"i",5)(7,"input",6),t.TgZ(8,"label",7),t._uU(9,"Username"),t.qZA()(),t.TgZ(10,"div",4),t._UZ(11,"i",8)(12,"input",9),t.TgZ(13,"label",10),t._uU(14,"Full Name"),t.qZA()(),t.TgZ(15,"div",11)(16,"div",12)(17,"div",4),t._UZ(18,"i",13)(19,"input",14)(20,"label",15),t.ALo(21,"translate"),t.qZA()(),t.TgZ(22,"div",12)(23,"div",4),t._UZ(24,"input",16)(25,"label",17),t.qZA()()(),t.TgZ(26,"div",18),t._UZ(27,"input",19),t.TgZ(28,"label",20),t._uU(29,"Admin User?"),t.qZA()(),t.TgZ(30,"div",21),t._UZ(31,"button",22),t.ALo(32,"translate"),t.qZA()()()()),2&e&&(t.xp6(2),t.Q6J("formGroup",s.form),t.xp6(1),t.Q6J("innerText",t.lcZ(4,13,s.page.title)),t.xp6(5),t.Q6J("ngClass",t.VKq(19,U,"users.title_edit_user"===s.page.title))("translate","users.label_username"),t.xp6(5),t.Q6J("ngClass",t.VKq(21,U,"users.title_edit_user"===s.page.title))("translate","users.label_full_name"),t.xp6(6),t.Q6J("ngClass",t.VKq(23,Z,s.form.controls.password.dirty&&s.form.controls.password.errors)),t.xp6(1),t.Q6J("innerText",t.lcZ(21,15,s.page.password)),t.xp6(4),t.Q6J("ngClass",t.VKq(25,Z,s.form.controls.passwordConfirm.dirty&&s.form.controls.passwordConfirm.errors)),t.xp6(1),t.Q6J("translate","users.label_confirm_password"),t.xp6(3),t.Q6J("translate","users.label_admin_user"),t.xp6(3),t.Q6J("disabled",!s.form.valid)("innerText",t.lcZ(32,17,s.page.save)))},dependencies:[d.mk,n._Y,n.Fj,n.Wl,n.JJ,n.JL,n.sg,n.u,l.Pi,l.X$],encapsulation:2}),r})();var A=u(71764),J=u(87575);const y=["qrcode"],k=function(r){return{timeDiffError:r}};function q(r,a){if(1&r&&(t.TgZ(0,"div",15)(1,"h3"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t._UZ(4,"p",16),t.qZA()),2&r){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,3,"users.setup_2fa_cannot_setup_2fa")),t.xp6(2),t.Q6J("translate","users.setup_2fa_server_time_out")("translateParams",t.VKq(5,k,e.timeDiffError))}}function I(r,a){1&r&&(t.TgZ(0,"div")(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA()()),2&r&&(t.xp6(2),t.Oqu(t.lcZ(3,1,"users.setup_2fa_scan_qr_code")))}function N(r,a){if(1&r&&(t.TgZ(0,"div",17)(1,"p"),t._uU(2),t.ALo(3,"translate"),t.qZA(),t.TgZ(4,"div",18),t._UZ(5,"input",19),t.qZA()()),2&r){const e=t.oxw();t.xp6(2),t.Oqu(t.lcZ(3,2,"users.setup_2fa_enter_code")),t.xp6(3),t.Q6J("formControl",e.formGroup.controls.code)}}function Q(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"button",20),t.NdJ("click",function(){t.CHM(e);const o=t.oxw();return t.KtG(o.enable2fa())}),t._uU(1,"Enable 2FA"),t.qZA()}if(2&r){const e=t.oxw();t.Q6J("disabled",e.formGroup.invalid)("translate","users.setup_2fa_enable")}}let $=(()=>{class r{constructor(e,s,o,i){this.activeModal=e,this.toastr=s,this.translate=o,this.$api=i,this.timeDiffError=null,this.formGroup=new n.cw({code:new n.NI("",[n.kI.required,n.kI.minLength(6),n.kI.maxLength(6)])})}ngOnInit(){this.$api.post("/users/otp/setup",{}).subscribe(e=>{this.checkTimeDiff(e.timestamp),this.timeDiffError||(this.otpString=e.otpauth)},e=>{this.activeModal.dismiss(),this.toastr.error(e.error.message||"An error occured while attempting to setup 2FA",this.translate.instant("toast.title_error"))})}checkTimeDiff(e){const s=A(e).diff(new Date,"millisecond");this.timeDiffError=s<-5e3||s>5e3?s:null}enable2fa(){this.$api.post("/users/otp/activate",this.formGroup.value).subscribe(e=>{this.toastr.success(this.translate.instant("users.setup_2fa_enabled_success"),this.translate.instant("toast.title_success")),this.activeModal.close()},e=>{this.toastr.error(e.error.message||"An error occured",this.translate.instant("toast.title_error"))})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.Kz),t.Y36(p._W),t.Y36(l.sK),t.Y36(c.s))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-users-setup2fa"]],viewQuery:function(e,s){if(1&e&&t.Gf(y,7),2&e){let o;t.iGM(o=t.CRH())&&(s.qrcodeElement=o.first)}},inputs:{user:"user"},decls:21,vars:13,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["class","text-center",4,"ngIf"],["type","info",3,"dismissible"],[4,"ngIf"],[1,"text-center","w-100","d-flex","justify-content-center"],[1,"mr-auto","ml-auto","mt-2","mb-2",2,"width","180px","height","180px",3,"data"],["class","mt-4",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-elegant",3,"translate","click"],["type","button","class","btn btn-primary","data-dismiss","modal",3,"disabled","translate","click",4,"ngIf"],[1,"text-center"],[3,"translate","translateParams"],[1,"mt-4"],[1,"form-group"],["type","text","placeholder","eg. 123456","autocomplete","one-time-code","autocapitalize","none","inputmode","numeric","pattern","[0-9]*",1,"form-control",3,"formControl"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","translate","click"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),t.TgZ(6,"span",4),t._uU(7,"\xd7"),t.qZA()()(),t.TgZ(8,"div",5),t.YNc(9,q,5,7,"div",6),t.TgZ(10,"ngb-alert",7),t._uU(11),t.ALo(12,"translate"),t.qZA(),t.YNc(13,I,4,3,"div",8),t.TgZ(14,"div",9),t._UZ(15,"app-qrcode",10),t.qZA(),t.YNc(16,N,6,4,"div",11),t.qZA(),t.TgZ(17,"div",12)(18,"button",13),t.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),t._uU(19,"Cancel"),t.qZA(),t.YNc(20,Q,2,2,"button",14),t.qZA()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,9,"users.setup_2fa")),t.xp6(6),t.Q6J("ngIf",s.timeDiffError),t.xp6(1),t.Q6J("dismissible",!1),t.xp6(1),t.hij(" ",t.lcZ(12,11,"users.setup_2fa_warning")," "),t.xp6(2),t.Q6J("ngIf",!s.timeDiffError),t.xp6(2),t.Q6J("data",s.otpString),t.xp6(1),t.Q6J("ngIf",!s.timeDiffError),t.xp6(2),t.Q6J("translate","form.button_cancel"),t.xp6(2),t.Q6J("ngIf",!s.timeDiffError))},dependencies:[d.O5,n.Fj,n.JJ,n.c5,n.oH,l.Pi,m.xm,J.z,l.X$]}),r})();function Y(r,a){1&r&&(t.TgZ(0,"p",12)(1,"small",13),t._uU(2,"Invalid Username and Password"),t.qZA()()),2&r&&(t.xp6(1),t.Q6J("translate","login.message_invalid_username_or_password"))}let F=(()=>{class r{constructor(e,s,o,i){this.activeModal=e,this.toastr=s,this.translate=o,this.$api=i,this.formGroup=new n.cw({password:new n.NI("",[n.kI.required])}),this.invalidCredentials=!1}ngOnInit(){}disable2fa(){this.invalidCredentials=!1,this.$api.post("/users/otp/deactivate",this.formGroup.value).subscribe(e=>{this.activeModal.close(),this.toastr.success(this.translate.instant("users.setup_2fa_disable_success"),this.translate.instant("toast.title_success"))},e=>{this.formGroup.setValue({password:""}),this.invalidCredentials=!0})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(m.Kz),t.Y36(p._W),t.Y36(l.sK),t.Y36(c.s))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-users-disable2fa"]],decls:23,vars:18,consts:[[1,"modal-content",2,"min-height","300px"],[1,"modal-header"],[1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"form-group"],["type","password","autocomplete","current-password",1,"form-control",3,"formControl","placeholder"],["class","red-text",4,"ngIf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-elegant","mr-auto",3,"click"],["type","button","data-dismiss","modal",1,"btn","btn-danger",3,"disabled","click"],[1,"red-text"],[3,"translate"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),t._uU(3),t.ALo(4,"translate"),t.qZA(),t.TgZ(5,"button",3),t.NdJ("click",function(){return s.activeModal.dismiss("Dismiss")}),t.TgZ(6,"span",4),t._uU(7,"\xd7"),t.qZA()()(),t.TgZ(8,"div",5)(9,"p"),t._uU(10),t.ALo(11,"translate"),t.qZA(),t.TgZ(12,"div",6),t._UZ(13,"input",7),t.ALo(14,"translate"),t.qZA(),t.YNc(15,Y,3,1,"p",8),t.qZA(),t.TgZ(16,"div",9)(17,"button",10),t.NdJ("click",function(){return s.activeModal.dismiss("Dismiss")}),t._uU(18),t.ALo(19,"translate"),t.qZA(),t.TgZ(20,"button",11),t.NdJ("click",function(){return s.disable2fa()}),t._uU(21),t.ALo(22,"translate"),t.qZA()()()),2&e&&(t.xp6(3),t.Oqu(t.lcZ(4,8,"users.setup_2fa_disable")),t.xp6(7),t.Oqu(t.lcZ(11,10,"users.setup_2fa_disable_enter_current_password")),t.xp6(3),t.Q6J("formControl",s.formGroup.controls.password)("placeholder",t.lcZ(14,12,"users.label_password")),t.xp6(2),t.Q6J("ngIf",s.invalidCredentials),t.xp6(3),t.hij(" ",t.lcZ(19,14,"form.button_cancel")," "),t.xp6(2),t.Q6J("disabled",s.formGroup.invalid),t.xp6(1),t.hij(" ",t.lcZ(22,16,"users.setup_2fa_disable")," "))},dependencies:[d.O5,n.Fj,n.JJ,n.oH,l.Pi,l.X$]}),r})();function S(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"button",15),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,i=t.oxw();return t.KtG(i.deleteUser(o.id))}),t._uU(1," Delete "),t.qZA()}2&r&&t.Q6J("translate","form.button_delete")}function D(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,i=t.oxw();return t.KtG(i.setup2fa(o))}),t._uU(1," Setup 2FA "),t.qZA()}2&r&&t.Q6J("translate","users.setup_2fa")}function E(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"button",14),t.NdJ("click",function(){t.CHM(e);const o=t.oxw().$implicit,i=t.oxw();return t.KtG(i.disable2fa(o))}),t._uU(1," Disable 2FA "),t.qZA()}2&r&&t.Q6J("translate","users.setup_2fa_disable")}function M(r,a){if(1&r){const e=t.EpF();t.TgZ(0,"div",8)(1,"div",9)(2,"div",10),t._UZ(3,"h4",11),t.YNc(4,S,2,1,"button",12),t.YNc(5,D,2,1,"button",13),t.YNc(6,E,2,1,"button",13),t.TgZ(7,"button",14),t.NdJ("click",function(){const i=t.CHM(e).$implicit,f=t.oxw();return t.KtG(f.openEditUser(i))}),t._uU(8," Edit "),t.qZA()()()()}if(2&r){const e=a.$implicit,s=t.oxw();t.xp6(3),t.Q6J("innerText",e.username),t.xp6(1),t.Q6J("ngIf",s.$auth.user.username!==e.username),t.xp6(1),t.Q6J("ngIf",s.$auth.user.username===e.username&&!e.otpActive),t.xp6(1),t.Q6J("ngIf",s.$auth.user.username===e.username&&e.otpActive),t.xp6(1),t.Q6J("translate","form.button_edit")}}let L=(()=>{class r{constructor(e,s,o,i,f,O){this.toastr=e,this.translate=s,this.modalService=o,this.$api=i,this.$route=f,this.$auth=O}ngOnInit(){this.$route.data.subscribe(e=>{this.homebridgeUsers=e.homebridgeUsers})}reloadUsers(){return this.$api.get("/users").subscribe(e=>{this.homebridgeUsers=e})}openAddNewUser(){this.modalService.open(x,{size:"lg"}).result.finally(()=>{this.reloadUsers()})}openEditUser(e){const s=this.modalService.open(T,{size:"lg"});s.componentInstance.user=e,s.result.finally(()=>{this.reloadUsers()})}deleteUser(e){this.$api.delete(`/users/${e}`).subscribe(s=>{this.toastr.success(this.translate.instant("users.toast_user_deleted"),this.translate.instant("toast.title_success")),this.reloadUsers()},s=>{this.toastr.error(s.error.message||this.translate.instant("users.toast_failed_to_delete_user"),this.translate.instant("toast.title_error"))})}setup2fa(e){const s=this.modalService.open($,{size:"lg",backdrop:"static"});s.componentInstance.user=e,s.result.finally(()=>{this.reloadUsers()})}disable2fa(e){const s=this.modalService.open(F,{backdrop:"static"});s.componentInstance.user=e,s.result.finally(()=>{this.reloadUsers()})}}return r.\u0275fac=function(e){return new(e||r)(t.Y36(p._W),t.Y36(l.sK),t.Y36(m.FF),t.Y36(c.s),t.Y36(_.gz),t.Y36(v.e))},r.\u0275cmp=t.Xpm({type:r,selectors:[["app-users"]],decls:12,vars:5,consts:[[1,"row","mb-3"],[1,"col-sm-9","d-none","d-sm-block"],[1,"primary-text","m-0"],[1,"d-none","d-md-inline"],[1,"col-sm-3","text-right"],[1,"btn","btn-primary","waves-effect","m-0",3,"translate","click"],[1,"row"],["class","col-md-6 mb-4",4,"ngFor","ngForOf"],[1,"col-md-6","mb-4"],[1,"card","card-body"],[1,"d-flex","flex-row","align-items-center"],[1,"mr-auto","mt-0","mb-0",3,"innerText"],["class","btn btn-elegant btn-sml mt-0 mb-0",3,"translate","click",4,"ngIf"],["class","btn btn-primary mt-0 mb-0",3,"translate","click",4,"ngIf"],[1,"btn","btn-primary","mt-0","mb-0",3,"translate","click"],[1,"btn","btn-elegant","btn-sml","mt-0","mb-0",3,"translate","click"]],template:function(e,s){1&e&&(t.TgZ(0,"div",0)(1,"div",1)(2,"h3",2)(3,"span",3),t._uU(4,"Homebridge Config UI"),t.qZA(),t._uU(5),t.ALo(6,"translate"),t.qZA()(),t.TgZ(7,"div",4)(8,"button",5),t.NdJ("click",function(){return s.openAddNewUser()}),t._uU(9,"Add User"),t.qZA()()(),t.TgZ(10,"div",6),t.YNc(11,M,9,5,"div",7),t.qZA()),2&e&&(t.xp6(5),t.hij(" ",t.lcZ(6,3,"users.title_users"),""),t.xp6(3),t.Q6J("translate","users.button_add_user"),t.xp6(3),t.Q6J("ngForOf",s.homebridgeUsers))},dependencies:[d.sg,d.O5,l.Pi,l.X$],encapsulation:2}),r})(),w=(()=>{class r{constructor(e,s,o){this.$api=e,this.$toastr=s,this.$router=o}resolve(e,s){return this.$api.get("/users").toPromise().catch(o=>{this.$toastr.error(o.message,"Failed to Load Users"),this.$router.navigate(["/"])})}}return r.\u0275fac=function(e){return new(e||r)(t.LFG(c.s),t.LFG(p._W),t.LFG(_.F0))},r.\u0275prov=t.Yz7({token:r,factory:r.\u0275fac}),r})();const G=[{path:"",component:L,resolve:{homebridgeUsers:w}}];let K=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({imports:[_.Bz.forChild(G),_.Bz]}),r})(),z=(()=>{class r{}return r.\u0275fac=function(e){return new(e||r)},r.\u0275mod=t.oAB({type:r}),r.\u0275inj=t.cJS({providers:[w],imports:[d.ez,n.u5,n.UX,l.aw.forChild(),m.IJ,C.I,K]}),r})()}}]);