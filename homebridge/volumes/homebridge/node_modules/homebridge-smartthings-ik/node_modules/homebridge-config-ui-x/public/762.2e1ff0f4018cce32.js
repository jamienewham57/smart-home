"use strict";(self.webpackChunkui=self.webpackChunkui||[]).push([[762],{8762:(X,b,l)=>{l.r(b),l.d(b,{SettingsModule:()=>K});var d=l(36895),o=l(24006),c=l(54463),_=l(8304),g=l(57750),v=l(17522),u=l(15861),Z=l(78372),h=l(97858),e=l(94650),m=l(97185),f=l(79274);let A=(()=>{class i{constructor(t,s,n,r){this.activeModal=t,this.toastr=s,this.translate=n,this.$api=r}onResetCachedAccessoriesClick(){return this.clicked=!0,this.$api.put("/server/reset-cached-accessories",{}).subscribe(t=>{this.toastr.success(this.translate.instant("reset.toast_clear_cached_accessories_success"),this.translate.instant("toast.title_success")),this.activeModal.close()},t=>{this.toastr.error(this.translate.instant("reset.toast_failed_to_reset"),this.translate.instant("toast.title_error"))})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.Kz),e.Y36(m._W),e.Y36(c.sK),e.Y36(f.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-remove-all-cached-accessories-modal"]],decls:23,vars:8,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"translate"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-center","primary-text",3,"translate"],[1,"text-center","grey-text",3,"translate"],[3,"translate"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-elegant",3,"disabled","translate","click"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"translate","click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3,"Clear Cached Accessories"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",5)(8,"h3",6),e._uU(9,"Warning"),e.qZA(),e.TgZ(10,"p",7),e._uU(11,"This action is irreversible. Please read carefully before proceeding."),e.qZA(),e.TgZ(12,"ul")(13,"li",8),e._uU(14," This action will remove all cached accessories from your Homebridge instance. "),e.qZA(),e.TgZ(15,"li",8),e._uU(16," After performing this action some accessories may need to be reconfigured in HomeKit or re-added to your automations. "),e.qZA()(),e.TgZ(17,"div",9)(18,"button",10),e.NdJ("click",function(){return s.onResetCachedAccessoriesClick()}),e._uU(19,"Clear Cached Accessories"),e.qZA()()(),e.TgZ(20,"div",11)(21,"button",12),e.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),e._uU(22,"Close"),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("translate","reset.title_clear_cached_accessories"),e.xp6(6),e.Q6J("translate","reset.title_warning"),e.xp6(2),e.Q6J("translate","reset.message_action_is_irreversible"),e.xp6(3),e.Q6J("translate","reset.message_remove_cached_accessories"),e.xp6(2),e.Q6J("translate","reset.accessories_will_may_need_to_be_reconfigured"),e.xp6(3),e.Q6J("disabled",s.clicked)("translate","reset.title_clear_cached_accessories"),e.xp6(3),e.Q6J("translate","form.button_close"))},dependencies:[c.Pi]}),i})(),x=(()=>{class i{constructor(t,s,n,r,p){this.activeModal=t,this.toastr=s,this.translate=n,this.$route=r,this.$api=p}onResetHomebridgeAccessoryClick(){var t=this;return this.clicked=!0,this.$api.put("/server/reset-homebridge-accessory",{}).subscribe(s=>{this.toastr.success(this.translate.instant("reset.toast_accessory_reset"),this.translate.instant("toast.title_success")),this.activeModal.close(),this.$route.navigate(["/restart"])},function(){var s=(0,u.Z)(function*(n){t.toastr.error(t.translate.instant("reset.toast_failed_to_reset"),t.translate.instant("toast.title_error"))});return function(n){return s.apply(this,arguments)}}())}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.Kz),e.Y36(m._W),e.Y36(c.sK),e.Y36(g.F0),e.Y36(f.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["ng-component"]],decls:31,vars:13,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"translate"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],[1,"text-center","primary-text",3,"translate"],[1,"text-center","grey-text",3,"translate"],[3,"translate"],[3,"innerHTML"],[1,"text-center"],["type","button","data-dismiss","modal",1,"btn","btn-elegant",3,"disabled","translate","click"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"translate","click"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3,"Reset Homebridge Accessory"),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",5)(8,"h3",6),e._uU(9,"Warning"),e.qZA(),e.TgZ(10,"p",7),e._uU(11,"This action is irreversible. Please read carefully before proceeding."),e.qZA(),e.TgZ(12,"ul")(13,"li",8),e._uU(14,"A reset will unpair this Homebridge instance from your Apple HomeKit setup."),e.qZA(),e.TgZ(15,"li",8),e._uU(16,"You will need to remove the existing Homebridge accessory from the Home app manually."),e.qZA(),e.TgZ(17,"li",8),e._uU(18,"All automations and will need to be reconfigured after a reset."),e.qZA(),e.TgZ(19,"li",8),e._uU(20,"Your Homebridge username and pin will be changed."),e.qZA(),e.TgZ(21,"li")(22,"strong",9),e.ALo(23,"translate"),e._uU(24,"The rest of your config will not be changed. If Homebridge is not starting due to a bad config a reset will not fix it."),e.qZA()()(),e.TgZ(25,"div",10)(26,"button",11),e.NdJ("click",function(){return s.onResetHomebridgeAccessoryClick()}),e._uU(27,"Reset Homebridge Now"),e.qZA()()(),e.TgZ(28,"div",12)(29,"button",13),e.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),e._uU(30,"Close"),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("translate","reset.title_reset_homebridge_accessory"),e.xp6(6),e.Q6J("translate","reset.title_warning"),e.xp6(2),e.Q6J("translate","reset.message_action_is_irreversible"),e.xp6(3),e.Q6J("translate","reset.message_reset_will_unpair_from_homekit"),e.xp6(2),e.Q6J("translate","reset.message_need_to_remove_homebridge_accessory_from_home_app"),e.xp6(2),e.Q6J("translate","reset.message_all_automations_will_be_reset"),e.xp6(2),e.Q6J("translate","reset.message_your_homebridge_username_will_be_changed"),e.xp6(3),e.Q6J("innerHTML",e.lcZ(23,11,"reset.message_accessory_config_will_not_be_changed"),e.oJD),e.xp6(4),e.Q6J("disabled",s.clicked)("translate","reset.button_reset_homebridge_now"),e.xp6(3),e.Q6J("translate","form.button_close"))},dependencies:[c.Pi,c.X$],encapsulation:2}),i})();const C=function(i,a){return{"fa-trash":i,"fa-cog fa-spin":a}};function T(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",11)(1,"span"),e._uU(2),e._UZ(3,"br"),e.TgZ(4,"small",12),e._uU(5),e.qZA()(),e.TgZ(6,"button",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.removeAccessory(r))}),e._UZ(7,"i",14),e.qZA()()}if(2&i){const t=a.$implicit,s=e.oxw();e.xp6(2),e.AsE(" ",t.displayName," (",t.plugin,") "),e.xp6(3),e.Oqu(t.UUID),e.xp6(1),e.Q6J("disabled",s.deleting),e.xp6(1),e.Q6J("ngClass",e.WLB(5,C,t.UUID!==s.deleting,t.UUID===s.deleting))}}let k=(()=>{class i{constructor(t,s,n,r){this.activeModal=t,this.toastr=s,this.translate=n,this.$api=r,this.deleting=null}ngOnInit(){this.loadCachedAccessories()}loadCachedAccessories(){var t=this;return(0,u.Z)(function*(){try{t.cachedAccessories=yield t.$api.get("/server/cached-accessories").toPromise()}catch{t.toastr.error("Accessory cache could not be loaded. You may not have any cached accessories.",t.translate.instant("toast.title_error")),t.activeModal.close()}})()}removeAccessory(t){var s=this;this.deleting=t.UUID,this.toastr.info(this.translate.instant("reset.toast_removing_cached_accessory_please_wait")),this.$api.delete(`/server/cached-accessories/${t.UUID}`,{params:{cacheFile:t.$cacheFile}}).subscribe(function(){var n=(0,u.Z)(function*(r){yield s.loadCachedAccessories(),s.deleting=null,s.cachedAccessories.length||s.activeModal.close(),s.toastr.success(s.translate.instant("reset.toast_cached_accessory_removed"),s.translate.instant("toast.title_success"))});return function(r){return n.apply(this,arguments)}}(),n=>{this.deleting=null,this.toastr.error(this.translate.instant("reset.toast_failed_to_delete_cached_accessory"),this.translate.instant("toast.title_error"))})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.Kz),e.Y36(m._W),e.Y36(c.sK),e.Y36(f.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-remove-single-cached-accessory-modal"]],decls:16,vars:8,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"translate"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","info",3,"dismissible"],[1,"list-group","mt-2"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","translate","click"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"grey-text"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas",3,"ngClass"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1)(2,"h5",2),e._uU(3," Remove Single Cached Accessory "),e.qZA(),e.TgZ(4,"button",3),e.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),e.TgZ(5,"span",4),e._uU(6,"\xd7"),e.qZA()()(),e.TgZ(7,"div",5)(8,"ngb-alert",6),e._uU(9),e.ALo(10,"translate"),e.qZA(),e.TgZ(11,"ul",7),e.YNc(12,T,8,8,"li",8),e.qZA()(),e.TgZ(13,"div",9)(14,"button",10),e.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),e._uU(15,"Close"),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("translate","reset.title_clear_cached_accessories_single"),e.xp6(6),e.Q6J("dismissible",!1),e.xp6(1),e.hij(" ",e.lcZ(10,6,"reset.message_remove_cached_accessories_single_warning")," "),e.xp6(3),e.Q6J("ngForOf",s.cachedAccessories),e.xp6(2),e.Q6J("disabled",s.deleting)("translate","form.button_close"))},dependencies:[d.mk,d.sg,c.Pi,_.xm,c.X$]}),i})();const y=function(i,a){return{"fa-trash":i,"fa-cog fa-spin":a}};function w(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",11)(1,"span"),e._uU(2),e.ALo(3,"titlecase"),e._UZ(4,"br"),e.TgZ(5,"small",12),e._uU(6),e.qZA()(),e.TgZ(7,"button",13),e.NdJ("click",function(){const r=e.CHM(t).$implicit,p=e.oxw();return e.KtG(p.removeAccessory(r._id))}),e._UZ(8,"i",14),e.qZA()()}if(2&i){const t=a.$implicit,s=e.oxw();e.xp6(2),e.AsE(" ",t.displayName," (",t._main?"Homebridge":e.lcZ(3,5,t._category),") "),e.xp6(4),e.Oqu(t._username),e.xp6(1),e.Q6J("disabled",s.deleting),e.xp6(1),e.Q6J("ngClass",e.WLB(7,y,t._id!==s.deleting,t._id===s.deleting))}}let U=(()=>{class i{constructor(t,s,n,r){this.activeModal=t,this.toastr=s,this.translate=n,this.$api=r,this.deleting=null}ngOnInit(){this.loadPairings()}loadPairings(){var t=this;return(0,u.Z)(function*(){try{t.pairings=(yield t.$api.get("/server/pairings").toPromise()).sort((s,n)=>n._main?1:-1)}catch{t.toastr.error("Paired accessories could not be loaded.",t.translate.instant("toast.title_error")),t.activeModal.close()}})()}removeAccessory(t){var s=this;this.deleting=t,this.$api.delete(`/server/pairings/${t}`).subscribe(function(){var n=(0,u.Z)(function*(r){yield s.loadPairings(),s.pairings.length||s.activeModal.close(),s.deleting=null,s.toastr.success(s.translate.instant("plugins.settings.toast_restart_required"),s.translate.instant("toast.title_success"))});return function(r){return n.apply(this,arguments)}}(),n=>{this.deleting=null,this.toastr.error("Failed to un-pair accessory.",this.translate.instant("toast.title_error"))})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.Kz),e.Y36(m._W),e.Y36(c.sK),e.Y36(f.s))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-unpair-accessory-modal"]],decls:15,vars:8,consts:[[1,"modal-content"],[1,"modal-header"],[1,"modal-title",3,"translate"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["type","info",3,"dismissible"],[1,"list-group","mt-2"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"disabled","translate","click"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"grey-text"],[1,"btn","btn-danger",3,"disabled","click"],[1,"fas",3,"ngClass"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"h5",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",4),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",5)(7,"ngb-alert",6),e._uU(8),e.ALo(9,"translate"),e.qZA(),e.TgZ(10,"ul",7),e.YNc(11,w,9,10,"li",8),e.qZA()(),e.TgZ(12,"div",9)(13,"button",10),e.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),e._uU(14,"Close"),e.qZA()()()),2&t&&(e.xp6(2),e.Q6J("translate","reset.title_unpair_bridges_cameras_tv_external_accessories"),e.xp6(5),e.Q6J("dismissible",!1),e.xp6(1),e.hij(" ",e.lcZ(9,6,"reset.message_need_to_remove_homebridge_accessory_from_home_app")," "),e.xp6(3),e.Q6J("ngForOf",s.pairings),e.xp6(2),e.Q6J("disabled",s.deleting)("translate","form.button_close"))},dependencies:[d.mk,d.sg,c.Pi,_.xm,d.rS,c.X$]}),i})();function M(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"li",16)(1,"span")(2,"label",17)(3,"input",18),e.NdJ("ngModelChange",function(n){const p=e.CHM(t).$implicit;return e.KtG(p.selected=n)}),e.qZA(),e.TgZ(4,"span"),e._uU(5),e.qZA(),e._UZ(6,"span",19),e.qZA()(),e.TgZ(7,"span"),e._uU(8),e.qZA()()}if(2&i){const t=a.$implicit;e.xp6(2),e.Q6J("for","adapter"+t.iface),e.xp6(1),e.Q6J("id","adapter"+t.iface)("ngModel",t.selected),e.xp6(2),e.Oqu(t.iface),e.xp6(3),e.hij(" ",t.ip4||t.ip6," ")}}let N=(()=>{class i{constructor(t){this.activeModal=t}ngOnInit(){}submit(){this.activeModal.close(this.availableNetworkAdapters.filter(t=>t.selected).map(t=>t.iface))}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(_.Kz))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-select-network-interfaces"]],inputs:{availableNetworkAdapters:"availableNetworkAdapters",bridgeNetworkAdapters:"bridgeNetworkAdapters"},decls:22,vars:3,consts:[[1,"modal-content"],[1,"modal-header"],["translate","settings.network.title_network_interfaces",1,"modal-title"],["type","button","data-dismiss","modal","aria-label","Close",1,"close",3,"click"],["aria-hidden","true"],[1,"modal-body"],["translate","settings.network.message_network_interface_one"],["translate","settings.network.message_network_interface_two"],[1,"list-group","mb-4"],[1,"mt-2","d-flex","flex-row","justify-content-between"],["translate","settings.network.label_interface_name"],["translate","settings.network.label_ip_address"],["class","mt-2 d-flex flex-row flex-wrap justify-content-between",4,"ngFor","ngForOf"],[1,"modal-footer"],["type","button","data-dismiss","modal",1,"btn","btn-elegant","mr-auto",3,"translate","click"],["type","button","data-dismiss","modal",1,"btn","btn-primary",3,"translate","click"],[1,"mt-2","d-flex","flex-row","flex-wrap","justify-content-between"],[1,"hb-uix-switch","d-inline","pr-3",3,"for"],["type","checkbox",3,"id","ngModel","ngModelChange"],[1,"hb-uix-slider","hb-uix-round"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"div",1),e._UZ(2,"h5",2),e.TgZ(3,"button",3),e.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),e.TgZ(4,"span",4),e._uU(5,"\xd7"),e.qZA()()(),e.TgZ(6,"div",5),e._UZ(7,"p",6)(8,"p",7),e.TgZ(9,"div")(10,"ul",8)(11,"li",9)(12,"span"),e._UZ(13,"strong",10),e.qZA(),e.TgZ(14,"span"),e._UZ(15,"strong",11),e.qZA()(),e.YNc(16,M,9,5,"li",12),e.qZA()()(),e.TgZ(17,"div",13)(18,"button",14),e.NdJ("click",function(){return s.activeModal.dismiss("Cross click")}),e._uU(19,"Cancel"),e.qZA(),e.TgZ(20,"button",15),e.NdJ("click",function(){return s.submit()}),e._uU(21,"Save"),e.qZA()()()),2&t&&(e.xp6(16),e.Q6J("ngForOf",s.availableNetworkAdapters),e.xp6(2),e.Q6J("translate","form.button_cancel"),e.xp6(2),e.Q6J("translate","form.button_save"))},dependencies:[d.sg,o.Wl,o.JJ,o.On,c.Pi]}),i})();var q=l(92503),J=l(37319);function S(i,a){1&i&&(e.TgZ(0,"button",17),e._uU(1,"Restart Required"),e.qZA()),2&i&&e.Q6J("translate","platform.docker.settings.button_restart_required")}function I(i,a){1&i&&e._UZ(0,"i",29)}const $=function(i,a){return{"badge-danger":i,"badge-info":a}};function Q(i,a){if(1&i&&(e.TgZ(0,"span")(1,"span",27),e.YNc(2,I,1,0,"i",28),e._uU(3),e.qZA()()),2&i){const t=a.$implicit;e.xp6(1),e.Q6J("ngbTooltip",t.missing?"Not Connected":t.ip4||t.ip6)("ngClass",e.WLB(4,$,t.missing,!t.missing)),e.xp6(1),e.Q6J("ngIf",t.missing),e.xp6(1),e.hij(" ",t.iface," ")}}function O(i,a){1&i&&(e.TgZ(0,"option",30),e._uU(1,"Avahi"),e.qZA())}function R(i,a){1&i&&(e.TgZ(0,"option",31),e._uU(1,"systemd-resolved (experimental)"),e.qZA())}const F=function(i){return{"fa-pulse":i}};function H(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",6),e._UZ(1,"h5",18),e.TgZ(2,"ul",9)(3,"li",10)(4,"span",11)(5,"div"),e._uU(6),e.ALo(7,"translate"),e.TgZ(8,"a",12),e.ALo(9,"translate"),e._UZ(10,"i",13),e.qZA()(),e.YNc(11,Q,4,7,"span",19),e.qZA(),e.TgZ(12,"button",20),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.selectNetworkInterfaces())}),e.ALo(13,"translate"),e._UZ(14,"i",21),e.qZA()(),e.TgZ(15,"li",10)(16,"span"),e._uU(17),e.ALo(18,"translate"),e.TgZ(19,"a",12),e.ALo(20,"translate"),e._UZ(21,"i",13),e.qZA()(),e.TgZ(22,"div")(23,"select",22),e.ALo(24,"translate"),e.TgZ(25,"option",23),e._uU(26,"Bonjour HAP"),e.qZA(),e.YNc(27,O,2,0,"option",24),e.YNc(28,R,2,0,"option",25),e.TgZ(29,"option",26),e._uU(30,"Ciao"),e.qZA()()()()()()}if(2&i){const t=e.oxw();e.xp6(6),e.hij("",e.lcZ(7,13,"settings.network.title_network_interfaces")," "),e.xp6(2),e.s9C("ngbTooltip",e.lcZ(9,15,"settings.network.message_network_interface_one")),e.xp6(3),e.Q6J("ngForOf",t.bridgeNetworkAdapters),e.xp6(1),e.Q6J("translate","reset.title_clear_cached_accessories")("disabled",!t.availableNetworkAdapters.length),e.uIk("aria-label",e.lcZ(13,17,"settings.network.title_network_interfaces")),e.xp6(2),e.Q6J("ngClass",e.VKq(25,F,!t.availableNetworkAdapters.length)),e.xp6(3),e.hij(" ",e.lcZ(18,19,"settings.mdns_advertiser")," "),e.xp6(2),e.s9C("ngbTooltip",e.lcZ(20,21,"settings.mdns_advertiser_help")),e.xp6(4),e.Q6J("formControl",t.legacyMdnsFormControl),e.uIk("aria-label",e.lcZ(24,23,"settings.mdns_advertiser")),e.xp6(4),e.Q6J("ngIf",t.showAvahiMdnsOption),e.xp6(1),e.Q6J("ngIf",t.showResolvedMdnsOption)}}function L(i,a){1&i&&(e.TgZ(0,"li",10)(1,"span"),e._uU(2,"Keep accessories of uninstalled plugins "),e.TgZ(3,"code"),e._uU(4,"-K"),e.qZA()(),e._UZ(5,"input",41)(6,"label",42),e.qZA())}function Y(i,a){1&i&&(e.TgZ(0,"div",43)(1,"h5",33),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ul",9)(5,"li",10)(6,"span"),e._uU(7," DEBUG "),e.TgZ(8,"a",44),e._UZ(9,"i",13),e.qZA()(),e.TgZ(10,"div",45),e._UZ(11,"input",46),e.qZA()(),e.TgZ(12,"li",10)(13,"span"),e._uU(14," NODE_OPTIONS "),e.TgZ(15,"a",47),e._UZ(16,"i",13),e.qZA()(),e.TgZ(17,"div",45),e._UZ(18,"input",48),e.qZA()()()()),2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,1,"settings.title_environment_variables")))}function E(i,a){if(1&i&&(e.TgZ(0,"form",32)(1,"h5",33),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"ul",34)(5,"li",10)(6,"span"),e._uU(7,"Homebridge Debug Mode "),e.TgZ(8,"code"),e._uU(9,"-D"),e.qZA()(),e._UZ(10,"input",35)(11,"label",36),e.qZA(),e.TgZ(12,"li",10)(13,"span"),e._uU(14,' Homebridge "Insecure" Mode '),e.TgZ(15,"span",2),e._uU(16," / Enable Accessory Control "),e.qZA(),e.TgZ(17,"code"),e._uU(18,"-I"),e.qZA()(),e._UZ(19,"input",37)(20,"label",38),e.qZA(),e.YNc(21,L,7,0,"li",39),e.qZA(),e.YNc(22,Y,19,3,"div",40),e.qZA()),2&i){const t=e.oxw();e.Q6J("formGroup",t.serviceForm),e.xp6(2),e.Oqu(e.lcZ(3,4,"settings.title_startup_options")),e.xp6(19),e.Q6J("ngIf",t.$settings.env.serviceMode),e.xp6(1),e.Q6J("ngIf",t.$settings.env.serviceMode)}}function D(i,a){if(1&i){const t=e.EpF();e.TgZ(0,"div",49)(1,"h5",7),e._uU(2),e.ALo(3,"translate"),e.qZA(),e.TgZ(4,"div",8),e._uU(5),e.ALo(6,"translate"),e.qZA(),e.TgZ(7,"ul",9)(8,"li",10)(9,"span",11),e._uU(10),e.ALo(11,"translate"),e.TgZ(12,"a",12),e.ALo(13,"translate"),e._UZ(14,"i",13),e.qZA()(),e.TgZ(15,"button",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.removeSingleCachedAccessories())}),e.ALo(16,"translate"),e._UZ(17,"i",15),e.qZA()(),e.TgZ(18,"li",10)(19,"span",11),e._uU(20),e.ALo(21,"translate"),e.TgZ(22,"a",12),e.ALo(23,"translate"),e._UZ(24,"i",13),e.qZA()(),e.TgZ(25,"button",50),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.removeAllCachedAccessories())}),e.ALo(26,"translate"),e._UZ(27,"i",15),e.qZA()()(),e.TgZ(28,"h5",7),e._uU(29),e.ALo(30,"translate"),e.qZA(),e.TgZ(31,"ul",9)(32,"li",10)(33,"span",11),e._uU(34),e.ALo(35,"translate"),e.TgZ(36,"a",12),e.ALo(37,"translate"),e._UZ(38,"i",13),e.qZA()(),e.TgZ(39,"button",14),e.NdJ("click",function(){e.CHM(t);const n=e.oxw();return e.KtG(n.forceRestartService())}),e.ALo(40,"translate"),e._UZ(41,"i",51),e.qZA()()()()}2&i&&(e.xp6(2),e.Oqu(e.lcZ(3,14,"settings.title_manage_cached_accessories")),e.xp6(3),e.hij(" ",e.lcZ(6,16,"settings.manage_cache.help")," "),e.xp6(5),e.hij(" ",e.lcZ(11,18,"reset.title_clear_cached_accessories_single")," "),e.xp6(2),e.s9C("ngbTooltip",e.lcZ(13,20,"reset.message_remove_cached_accessories_single")),e.xp6(3),e.Q6J("translate","reset.title_clear_cached_accessories_single"),e.uIk("aria-label",e.lcZ(16,22,"reset.title_clear_cached_accessories_single")),e.xp6(5),e.hij(" ",e.lcZ(21,24,"reset.title_clear_cached_accessories")," "),e.xp6(2),e.s9C("ngbTooltip",e.lcZ(23,26,"reset.message_remove_cached_accessories")),e.xp6(3),e.Q6J("translate","reset.title_clear_cached_accessories"),e.uIk("aria-label",e.lcZ(26,28,"reset.title_clear_cached_accessories")),e.xp6(4),e.Oqu(e.lcZ(30,30,"settings.title_actions")),e.xp6(5),e.hij(" ",e.lcZ(35,32,"reset.title_force_restart_hb_service")," "),e.xp6(2),e.s9C("ngbTooltip",e.lcZ(37,34,"reset.message_force_restart_hb_help_text")),e.xp6(3),e.uIk("aria-label",e.lcZ(40,36,"reset.title_force_restart_hb_service")))}const P=[{path:"",component:(()=>{class i{constructor(t,s,n,r,p,B,G,z,W){this.$settings=t,this.$api=s,this.$notification=n,this.$fb=r,this.$toastr=p,this.$modal=B,this.$route=G,this.$router=z,this.translate=W,this.serviceForm=new o.cw({HOMEBRIDGE_DEBUG:new o.NI(!1),HOMEBRIDGE_KEEP_ORPHANS:new o.NI(!1),HOMEBRIDGE_INSECURE:new o.NI(!0),ENV_DEBUG:new o.NI(null),ENV_NODE_OPTIONS:new o.NI(null)}),this.legacyMdnsFormControl=new o.p4(!1),this.saved=!1,this.showNetworking=!1,this.showAvahiMdnsOption=!1,this.showResolvedMdnsOption=!1,this.availableNetworkAdapters=[],this.bridgeNetworkAdapters=[]}ngOnInit(){this.initNetworkingOptions(),this.$settings.env.serviceMode&&this.initServiceModeForm()}initServiceModeForm(){this.$api.get("/platform-tools/hb-service/homebridge-startup-settings").subscribe(t=>{this.serviceForm.patchValue(t),this.serviceForm.valueChanges.pipe((0,Z.b)(500)).subscribe(this.saveServiceModeSettings.bind(this))},t=>{this.$toastr.error(t.message,"Failed to load startup settings")})}saveServiceModeSettings(t=this.serviceForm.value){this.$api.put("/platform-tools/hb-service/homebridge-startup-settings",t).subscribe(()=>{this.saved=!0,this.$notification.configUpdated.next(void 0)})}resetHomebridgeState(){this.$modal.open(x,{size:"lg"})}unpairAccessory(){this.$modal.open(U,{size:"lg"})}removeAllCachedAccessories(){this.$modal.open(A,{size:"lg"})}removeSingleCachedAccessories(){this.$modal.open(k,{size:"lg"})}forceRestartService(){this.$api.put("/platform-tools/hb-service/set-full-service-restart-flag",{}).subscribe(()=>{this.$router.navigate(["/restart"])},t=>{this.$toastr.error(t.message,"Failed to set force setvice restart flag.")})}initNetworkingOptions(){var t=this;return(0,u.Z)(function*(){try{const s=yield t.$api.get("/status/homebridge-version").toPromise();h.gte(s.installedVersion,"1.3.0-beta.0",{includePrerelease:!0})&&(t.showNetworking=!0,t.getNetworkSettings());const n=t.$settings.env.runningInLinux||t.$settings.env.runningInDocker||t.$settings.env.runningInSynologyPackage||t.$settings.env.runningInPackageMode;h.gte(s.installedVersion,"1.4.0-beta.0",{includePrerelease:!0})&&n&&(t.showAvahiMdnsOption=!0),h.gte(s.installedVersion,"1.6.0-beta.0",{includePrerelease:!0})&&n&&(t.showResolvedMdnsOption=!0)}catch{}})()}getNetworkSettings(){var t=this;return(0,u.Z)(function*(){return Promise.all([t.$api.get("/server/network-interfaces/system").toPromise(),t.$api.get("/server/network-interfaces/bridge").toPromise(),t.$api.get("/server/mdns-advertiser").toPromise()]).then(([s,n,r])=>{t.availableNetworkAdapters=s,t.buildBridgeNetworkAdapterList(n),t.legacyMdnsFormControl.patchValue(r.advertiser),t.legacyMdnsFormControl.valueChanges.subscribe(p=>{t.setHomebridgeMdnsSetting(p)})})})()}setHomebridgeMdnsSetting(t){var s=this;return(0,u.Z)(function*(){s.$api.put("/server/mdns-advertiser",{advertiser:t}).subscribe(()=>{s.saved=!0,s.$notification.configUpdated.next(void 0)},n=>{s.$toastr.error(n.message,"Failed to set mdns advertiser.")})})()}setNetworkInterfaces(t){var s=this;return(0,u.Z)(function*(){s.$api.put("/server/network-interfaces/bridge",{adapters:t}).subscribe(()=>{s.saved=!0,s.$notification.configUpdated.next(void 0)},n=>{s.$toastr.error(n.message,"Failed to set network adapters.")})})()}buildBridgeNetworkAdapterList(t){this.bridgeNetworkAdapters=t.length?t.map(s=>{const n=this.availableNetworkAdapters.find(r=>r.iface===s);return n?(n.selected=!0,n.missing=!1,n):{iface:s,missing:!0}}):[]}selectNetworkInterfaces(){const t=this.$modal.open(N,{size:"lg"});t.componentInstance.availableNetworkAdapters=this.availableNetworkAdapters,t.componentInstance.bridgeNetworkAdapters=this.bridgeNetworkAdapters,t.result.then(s=>{this.buildBridgeNetworkAdapterList(s),this.setNetworkInterfaces(s)}).catch(()=>{})}}return i.\u0275fac=function(t){return new(t||i)(e.Y36(q.g),e.Y36(f.s),e.Y36(J.g),e.Y36(o.QS),e.Y36(m._W),e.Y36(_.FF),e.Y36(g.gz),e.Y36(g.F0),e.Y36(c.sK))},i.\u0275cmp=e.Xpm({type:i,selectors:[["app-settings"]],decls:38,vars:30,consts:[[1,"d-flex","justify-content-between"],[1,"primary-text","m-0"],[1,"d-none","d-md-inline"],["class","btn btn-primary waves-effect m-0","routerLink","/restart",3,"translate",4,"ngIf"],["class","mb-3",4,"ngIf"],["class","mt-3 mb-3","novalidate","",3,"formGroup",4,"ngIf"],[1,"mb-3"],[1,"primary-text","mt-3"],["role","alert",1,"alert","alert-info"],[1,"list-group","mt-2"],[1,"list-group-item","d-flex","justify-content-between","align-items-center"],[1,"pr-2"],["href","javascript:void(0)",3,"ngbTooltip"],[1,"fas","fa-info-circle","primary-text"],[1,"btn","btn-primary","waves-effect","m-0",3,"click"],[1,"fas","fa-flip-horizontal","fa-external-link-square-alt"],["class","pb-3",4,"ngIf"],["routerLink","/restart",1,"btn","btn-primary","waves-effect","m-0",3,"translate"],["translate","settings.network.title_network",1,"primary-text","mt-3"],[4,"ngFor","ngForOf"],[1,"btn","btn-primary","waves-effect","m-0",3,"translate","disabled","click"],[1,"fas","fa-cog",3,"ngClass"],[1,"custom-select",3,"formControl"],["value","bonjour-hap"],["value","avahi",4,"ngIf"],["value","resolved",4,"ngIf"],["value","ciao"],["placement","bottom-left","openDelay","150",1,"badge","badge-pill","mr-1",3,"ngbTooltip","ngClass"],["class","fas fa-exclamation-triangle",4,"ngIf"],[1,"fas","fa-exclamation-triangle"],["value","avahi"],["value","resolved"],["novalidate","",1,"mt-3","mb-3",3,"formGroup"],[1,"primary-text"],[1,"list-group"],["type","checkbox","id","homebridgeDebugMode","formControlName","HOMEBRIDGE_DEBUG","aria-label","Debug Mode",1,"rendux-input"],["for","homebridgeDebugMode",1,"rendux-label"],["type","checkbox","id","homebridgeInsecureMode","formControlName","HOMEBRIDGE_INSECURE","aria-label","Insecure Mode",1,"rendux-input"],["for","homebridgeInsecureMode",1,"rendux-label"],["class","list-group-item d-flex justify-content-between align-items-center",4,"ngIf"],["class","mt-3",4,"ngIf"],["type","checkbox","id","homebridgeKeepOrphans","formControlName","HOMEBRIDGE_KEEP_ORPHANS","aria-label","Keep accessories of uninstall plugins",1,"rendux-input"],["for","homebridgeKeepOrphans",1,"rendux-label"],[1,"mt-3"],["href","javascript:void(0)","ngbTooltip","Some plugins require you to set the DEBUG environment variable to enable debug level logging."],[1,"pull-right"],["formControlName","ENV_DEBUG","type","text",1,"form-control","form-control-sm"],["href","https://nodejs.org/api/cli.html","target","_blank","ngbTooltip","Node.js runtime options for the Homebridge process. This should be kept blank unless you know what you are doing."],["formControlName","ENV_NODE_OPTIONS","type","text",1,"form-control","form-control-sm"],[1,"pb-3"],[1,"btn","btn-primary","waves-effect","m-0",3,"translate","click"],[1,"fas","fa-sync"]],template:function(t,s){1&t&&(e.TgZ(0,"div",0)(1,"h3",1)(2,"span",2),e._uU(3,"Homebridge"),e.qZA(),e._uU(4," Settings "),e.qZA(),e.YNc(5,S,2,1,"button",3),e.qZA(),e.YNc(6,H,31,27,"div",4),e.YNc(7,E,23,6,"form",5),e.TgZ(8,"div",6)(9,"h5",7),e._uU(10),e.ALo(11,"translate"),e.qZA(),e.TgZ(12,"div",8),e._uU(13),e.ALo(14,"translate"),e.qZA(),e.TgZ(15,"ul",9)(16,"li",10)(17,"span",11),e._uU(18),e.ALo(19,"translate"),e.TgZ(20,"a",12),e.ALo(21,"translate"),e._UZ(22,"i",13),e.qZA()(),e.TgZ(23,"button",14),e.NdJ("click",function(){return s.unpairAccessory()}),e.ALo(24,"translate"),e._UZ(25,"i",15),e.qZA()(),e.TgZ(26,"li",10)(27,"span",11),e._uU(28),e.ALo(29,"titlecase"),e.ALo(30,"translate"),e.TgZ(31,"a",12),e.ALo(32,"translate"),e._UZ(33,"i",13),e.qZA()(),e.TgZ(34,"button",14),e.NdJ("click",function(){return s.resetHomebridgeState()}),e.ALo(35,"translate"),e._UZ(36,"i",15),e.qZA()()()(),e.YNc(37,D,42,38,"div",16)),2&t&&(e.xp6(5),e.Q6J("ngIf",s.saved),e.xp6(1),e.Q6J("ngIf",s.showNetworking),e.xp6(1),e.Q6J("ngIf",s.$settings.env.serviceMode),e.xp6(3),e.Oqu(e.lcZ(11,12,"reset.title_reset")),e.xp6(3),e.hij(" ",e.lcZ(14,14,"settings.reset.help")," "),e.xp6(5),e.hij(" ",e.lcZ(19,16,"reset.title_unpair_bridges_cameras_tv_external_accessories")," "),e.xp6(2),e.s9C("ngbTooltip",e.lcZ(21,18,"reset.message_unpair_bridges_cameras_tv_external_accessories")),e.xp6(3),e.uIk("aria-label",e.lcZ(24,20,"reset.title_unpair_bridges_cameras_tv_external_accessories")),e.xp6(5),e.hij(" ",e.lcZ(29,22,e.lcZ(30,24,"reset.title_reset_homebridge_accessory"))," "),e.xp6(3),e.s9C("ngbTooltip",e.lcZ(32,26,"reset.message_reset_will_unpair_from_homekit")),e.xp6(3),e.uIk("aria-label",e.lcZ(35,28,"reset.title_reset_homebridge_accessory")),e.xp6(3),e.Q6J("ngIf",s.$settings.env.serviceMode))},dependencies:[d.mk,d.sg,d.O5,o._Y,o.YN,o.Kr,o.Fj,o.Wl,o.EJ,o.JJ,o.JL,o.oH,o.sg,o.u,c.Pi,_._L,g.rH,d.rS,c.X$]}),i})(),canActivate:[v.u]}];let j=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[g.Bz.forChild(P),g.Bz]}),i})(),K=(()=>{class i{}return i.\u0275fac=function(t){return new(t||i)},i.\u0275mod=e.oAB({type:i}),i.\u0275inj=e.cJS({imports:[d.ez,o.u5,o.UX,c.aw,_.IJ,j]}),i})()}}]);